/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * To learn more about Gradle by exploring our Samples at https://docs.gradle.org/8.2.1/samples
 */

buildscript {
  repositories {
    mavenLocal()
    mavenCentral()
  }
  dependencies {
    classpath "org.openapitools:openapi-generator-gradle-plugin:6.6.0"
  }
}

apply plugin: 'org.openapi.generator'


def dpInputSpec = "$rootDir/memas-api/dp.yml"
def cpInputSpec = "$rootDir/memas-api/cp.yml"

def dpOutputDir = "$rootDir/memas-clients"
def cpOutputDir = "$rootDir/memas-sdks"

def clientVersion = "0.1.0"
def sdkVersion = "0.1.0"


task javaClient(type: org.openapitools.generator.gradle.plugin.tasks.GenerateTask) {
    generatorName.set("java")
    inputSpec.set(dpInputSpec)
    outputDir.set("$dpOutputDir/java")
    apiPackage.set("ai.memas.memasclient.api")
    invokerPackage.set("ai.memas.memasclient.invoker")
    modelPackage.set("ai.memas.memasclient.model")

    configOptions.set([
        artifactId: "memas-client",
        artifactUrl: "https://github.com/memas-ai/MeMaS-java-client",
        artifactVersion: clientVersion,
        developerEmail: "max.yu@memas.ai",
        developerName: "MeMaS Contributors",
        developerOrganization: "memas.ai",
        developerOrganizationUrl: "http://memas.ai",
        groupId: "ai.memas",
        licenseName: "Apache License 2.0",
        licenseUrl: "https://www.apache.org/licenses/LICENSE-2.0.txt",
        scmConnection: "scm:git:git@github.com:memas-ai/MeMaS-java-client.git",
        scmDeveloperConnection: "scm:git:git@github.com:memas-ai/MeMaS-java-client.git",
        scmUrl: "https://github.com/memas-ai/MeMaS-java-client",
    ])
}

task javaSDK(type: org.openapitools.generator.gradle.plugin.tasks.GenerateTask) {
    generatorName.set("java")
    inputSpec.set(cpInputSpec)
    outputDir.set("$cpOutputDir/java")
    apiPackage.set("ai.memas.memassdk.api")
    invokerPackage.set("ai.memas.memassdk.invoker")
    modelPackage.set("ai.memas.memassdk.model")

    configOptions.set([
        artifactId: "memas-sdk",
        artifactUrl: "https://github.com/memas-ai/MeMaS-java-sdk",
        artifactVersion: sdkVersion,
        developerEmail: "max.yu@memas.ai",
        developerName: "MeMaS Contributors",
        developerOrganization: "memas.ai",
        developerOrganizationUrl: "http://memas.ai",
        groupId: "ai.memas",
        licenseName: "Apache License 2.0",
        licenseUrl: "https://www.apache.org/licenses/LICENSE-2.0.txt",
        scmConnection: "scm:git:git@github.com:memas-ai/MeMaS-java-sdk.git",
        scmDeveloperConnection: "scm:git:git@github.com:memas-ai/MeMaS-java-sdk.git",
        scmUrl: "https://github.com/memas-ai/MeMaS-java-sdk",
    ])
}


task pythonClient(type: org.openapitools.generator.gradle.plugin.tasks.GenerateTask) {
    generatorName.set("python")
    inputSpec.set(dpInputSpec)
    outputDir.set("$dpOutputDir/python")

    configOptions.set([
        packageName: "memas_client",
        packageVersion: clientVersion,
    ])
}

task pythonSDK(type: org.openapitools.generator.gradle.plugin.tasks.GenerateTask) {
    generatorName.set("python")
    inputSpec.set(cpInputSpec)
    outputDir.set("$cpOutputDir/python")

    configOptions.set([
        packageName: "memas_sdk",
        packageVersion: sdkVersion,
    ])
}


task tsNodeClient(type: org.openapitools.generator.gradle.plugin.tasks.GenerateTask) {
    generatorName.set("typescript-node")
    inputSpec.set(dpInputSpec)
    outputDir.set("$dpOutputDir/ts-node")

    configOptions.set([
        npmName: "memas-client",
        npmVersion: clientVersion,
    ])
}

task tsNodeSDK(type: org.openapitools.generator.gradle.plugin.tasks.GenerateTask) {
    generatorName.set("typescript-node")
    inputSpec.set(cpInputSpec)
    outputDir.set("$cpOutputDir/ts-node")

    configOptions.set([
        npmName: "memas-sdk",
        npmVersion: sdkVersion,
    ])
}


task goClient(type: org.openapitools.generator.gradle.plugin.tasks.GenerateTask) {
    generatorName.set("go")
    inputSpec.set(dpInputSpec)
    outputDir.set("$dpOutputDir/go")

    configOptions.set([
        packageName: "memas-client",
        packageVersion: clientVersion,
    ])
}

task goSDK(type: org.openapitools.generator.gradle.plugin.tasks.GenerateTask) {
    generatorName.set("go")
    inputSpec.set(cpInputSpec)
    outputDir.set("$cpOutputDir/go")

    configOptions.set([
        packageName: "memas-sdk",
        packageVersion: sdkVersion,
    ])
}


task rustClient(type: org.openapitools.generator.gradle.plugin.tasks.GenerateTask) {
    generatorName.set("rust")
    inputSpec.set(dpInputSpec)
    outputDir.set("$dpOutputDir/rust")

    configOptions.set([
        packageName: "memas-client",
        packageVersion: clientVersion,
    ])
}

task rustSDK(type: org.openapitools.generator.gradle.plugin.tasks.GenerateTask) {
    generatorName.set("rust")
    inputSpec.set(cpInputSpec)
    outputDir.set("$cpOutputDir/rust")

    configOptions.set([
        packageName: "memas-sdk",
        packageVersion: sdkVersion,
    ])
}